window.JAlbum={};JAlbum.Util={getImagePath:function(a){return util.getScriptLocation("jalbum.js")+"theme/images/"+a}};JAlbum.Album=util.Class({imageWidth:null,imageHeight:null,triggerText:null,triggerVisible:false,triggerClickEvent:null,initialize:function(b,a){$("#"+b).html("<ul class='album-container'></ul>");this.imageWidth=120;this.imageHeight=120;this.triggerText="设置为默认图像";if(a){if(a.imageWidth){this.imageWidth=a.imageWidth}if(a.imageHeight){this.imageHeight=a.imageHeight}if(a.triggerText){this.triggerText=a.triggerText}if(a.triggerVisible){this.triggerVisible=a.triggerVisible}}},showUploading:function(){$(".album-container").append("<li class='uploading'><a><img></a></li>");var a=$(".album-container li:last");a.css("border","1px solid #cccccc");a.find("a").width(this.imageWidth);a.find("a").height(this.imageHeight);a.find("img").css("padding-top",(this.imageHeight-16)/2+"px");a.find("img").attr("src",JAlbum.Util.getImagePath("uploading.gif"))},setAvatar:function(a){$(".album-container .album-avatar").remove();$("#photo_"+a).append("<div class='album-avatar'><img src='"+JAlbum.Util.getImagePath("selected.png")+"'><div>")},addImage:function(b){$(".album-container").find(".uploading").remove();$(".album-container").append("<li><a><img></a></li>");var a=$(".album-container li:last");a.attr("id","photo_"+b.id);a.attr("data-action",b.id);a.css("position","relative");a.find("a").attr("href",b.href);a.find("img").attr("src",JAlbum.Util.getImagePath("place_holder.png"));a.find("img").width(this.imageWidth);a.find("img").height(this.imageHeight);a.find("img").css("background-image","url("+b.src+")");a.find("img").css("background-repeat","no-repeat");a.find("img").css("background-position","center");a.find("img").css("background-color","#DDD");if(b.avatar){a.append("<div class='album-avatar'><img src='"+JAlbum.Util.getImagePath("selected.png")+"'><div>")}if(this.triggerVisible){var c=this;a.mouseenter(function(){$(this).append("<div class='album-operator'><span></span>"+c.triggerText+"<div>");var e=$(this).attr("data-action");var d=$(this).find(".album-operator");d.attr("data-action",e);d.css("background-image","url("+JAlbum.Util.getImagePath("black_bk.png")+")");d.width(c.imageWidth);d.find("span").css("background","url("+JAlbum.Util.getImagePath("edit_16.png")+") no-repeat 0 4px");d.mouseenter(function(){d.css("background-image","url("+JAlbum.Util.getImagePath("hover_bk.png")+")")});d.mouseleave(function(){d.css("background-image","url("+JAlbum.Util.getImagePath("black_bk.png")+")")});d.click(function(){if(c.triggerClickEvent){c.triggerClickEvent($(this).attr("data-action"))}})});a.mouseleave(function(){$(this).find(".album-operator").remove()})}},setImageWidth:function(a){this.imageWidth=a;$(".album-container img").width(this.imageWidth)},setImageHeight:function(a){this.imageHeight=a;$(".album-container img").height(this.imageHeight)}});